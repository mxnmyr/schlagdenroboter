<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Vier Gewinnt - Leaderboard</title>
	<style>
		* { margin: 0; padding: 0; box-sizing: border-box; }
		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: linear-gradient(135deg, #b1cb21 0%, #7a9615 100%);
			min-height: 100vh;
			padding: 20px;
			color: #333;
		}
		.header { text-align: center; margin-bottom: 30px; padding-top: 60px; }
		.logo { position: absolute; top: 15px; right: 15px; width: 150px; height: auto; background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 10px; }
		.luh { position: absolute; top: 15px; left: 15px; width: 180px; height: auto; background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 10px; }
		h1 { color: white; font-size: 2.8em; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); margin-bottom: 10px; }
		.subtitle { color: rgba(255, 255, 255, 0.9); font-size: 1.2em; }
		.container { max-width: 1400px; margin: 0 auto; }
		.leaderboard-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
		.leaderboard-section { background: white; border-radius: 20px; padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
		@media (max-width: 1024px) { .leaderboard-grid { grid-template-columns: 1fr; } }
		.section-title { font-size: 1.8em; color: #333; margin-bottom: 20px; text-align: center; border-bottom: 3px solid #b1cb21; padding-bottom: 10px; }
		.leaderboard-list { list-style: none; }
		.leaderboard-item { display: flex; align-items: center; padding: 20px; margin-bottom: 15px; background: linear-gradient(135deg, #e8e8e8 0%, #d0d0d0 100%); border-radius: 15px; }
		.leaderboard-item:nth-child(1) { background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); }
		.leaderboard-item:nth-child(2) { background: linear-gradient(135deg, #e0e0e0 0%, #c0c0c0 100%); }
		.leaderboard-item:nth-child(3) { background: linear-gradient(135deg, #cd7f32 0%, #b8732d 100%); }
		.bottom-item { background: linear-gradient(135deg, #9e9e9e 0%, #7a7a7a 100%) !important; }
		.rank-number { font-size: 2.5em; font-weight: bold; color: rgba(0, 0, 0, 0.6); width: 70px; text-align: center; }
		.player-info { flex: 1; margin-left: 20px; }
		.player-name { font-size: 1.5em; font-weight: bold; color: #333; margin-bottom: 5px; }
		.player-stats { display: flex; gap: 20px; flex-wrap: wrap; }
		.stat { background: rgba(255, 255, 255, 0.7); padding: 5px 12px; border-radius: 20px; font-size: 0.9em; }
		.stat-label { font-weight: 600; margin-right: 5px; color: #555; }
		.empty-state { text-align: center; padding: 60px 20px; color: #999; }
		.buttons { text-align: center; margin-top: 30px; }
		.btn { display: inline-block; padding: 15px 35px; background: linear-gradient(135deg, #b1cb21 0%, #8fa619 100%); color: white; text-decoration: none; border-radius: 30px; font-size: 1.1em; font-weight: 600; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: transform 0.2s; margin: 0 10px; }
		.btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.3); }
	</style>
</head>
<body>
	<img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo">
	<img src="{{ url_for('static', filename='luh_logo.png') }}" alt="LUH Logo" class="luh">
	<div class="header">
		<h1>üé≤ Vier Gewinnt</h1>
		<div class="subtitle">Leaderboard</div>
	</div>
	<div class="container">
		<div class="leaderboard-grid">
			<div class="leaderboard-section">
				<h2 class="section-title">üèÜ Top 5 - Wenigste Z√ºge</h2>
				{% if top5 %}
					<ol class="leaderboard-list">
					{% for entry in top5 %}
						<li class="leaderboard-item">
							<div class="rank-number">{{ loop.index }}</div>
							<div class="player-info">
								<div class="player-name">{{ entry.name }}</div>
								<div class="player-stats">
									<span class="stat"><span class="stat-label">ÔøΩ Beste Z√ºge:</span> {{ entry.best_moves }}</span>
									<span class="stat"><span class="stat-label">üìä √ò Z√ºge:</span> {{ "%.1f"|format(entry.avg_moves) }}</span>
									<span class="stat"><span class="stat-label">üéÆ Spiele:</span> {{ entry.total }}</span>
								</div>
							</div>
						</li>
					{% endfor %}
					</ol>
				{% else %}
					<div class="empty-state">Noch keine Eintr√§ge</div>
				{% endif %}
			</div>
			<div class="leaderboard-section">
				<h2 class="section-title">üìâ Letzte 5</h2>
				{% if bottom5 %}
					<ul class="leaderboard-list">
					{% for entry in bottom5 %}
						<li class="leaderboard-item bottom-item">
							<div class="rank-number">üìÖ</div>
							<div class="player-info">
								<div class="player-name">{{ entry.name }}</div>
								<div class="player-stats">
									<span class="stat"><span class="stat-label">üéØ Z√ºge:</span> {{ entry.moves }}</span>
									<span class="stat"><span class="stat-label">üéØ Level:</span> {{ entry.difficulty }}</span>
									<span class="stat"><span class="stat-label">üïí</span> {{ entry.timestamp[:10] }} {{ entry.timestamp[11:16] }}</span>
								</div>
							</div>
						</li>
					{% endfor %}
					</ul>
				{% else %}
					<div class="empty-state">Noch keine Eintr√§ge</div>
				{% endif %}
			</div>
		</div>
		<div class="buttons">
			<a href="/" class="btn">üîô Zur√ºck zur √úbersicht</a>
		</div>
	</div>
	
	<script>
		// Auto-refresh nur bei neuen Daten
		let lastUpdate = null;
		
		async function checkForUpdates() {
			try {
				const response = await fetch('/api/last_update');
				const data = await response.json();
				
				if (lastUpdate === null) {
					// Beim ersten Aufruf nur speichern
					lastUpdate = data.last_update;
				} else if (lastUpdate !== data.last_update) {
					// Daten haben sich ge√§ndert - Seite neu laden
					location.reload();
				}
			} catch (error) {
				console.error('Fehler beim Pr√ºfen auf Updates:', error);
			}
		}
		
		// Alle 2 Sekunden auf Updates pr√ºfen
		setInterval(checkForUpdates, 2000);
		checkForUpdates();
	</script>
</body>
</html>
